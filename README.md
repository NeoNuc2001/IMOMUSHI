# このプロジェクトは開発初期段階です。潜在的なバグなどがある場合があり、実行は自己責任でお願いします

# IMOMUSHI

IMOMUSHIは、タッチパネルやスマートフォンを使ってPC上のキー入力をエミュレートするためのPython製ツールです。  
FlaskとSocket.IOを利用し、Webブラウザからのタッチ操作を仮想キー入力に変換します。

## 構成ファイル

- `main.py` : サーバー本体。Flask/Socket.IOでWeb UIと通信し、タッチイベントをキー入力に変換します。
- `keyboard_event.py` : 仮想キー入力の実装。
- `unbind_all.py` : すべてのキー入力を解除するユーティリティ。
- `templates/index.html` : タッチパネルUIのWebページ。
- `start.cmd` : Windows用起動バッチ。
- `README.md` : このファイル。

## 必要なPythonパッケージ

- flask
- flask_socketio
- psutil
- keyboard

インストール例:
```
pip install -r requirements.txt
```

## 使い方

1. `start.cmd` または `python main.py` でサーバーを起動します。
2. スマートフォンやPCのブラウザで `http://<サーバーのIP>:5000/` にアクセスします。
3. 画面のパネルをタッチすると、PC上で対応するキーが押されます。
4. エアーはUMIGURIがアクティブな時にに自動的に処理されます

### 自動エアー

UMIGURIがアクティブな場合、プレイ状況に関わらずエアーが実行されています。
そのためショートカットキーなどで別アプリケーションに遷移したい場合は右Shiftキーを押し続けることで自動エアーを一時的に停止することができます

## キーイベント

なにかしらの理由でアプリケーションが終了した場合はキーイベントが残ったママになってしまう場合があります。
その場合は
```
python unbind.py
```
を実行してください。数秒間キー入力ができなくなりますが、その後正常にキーボードが使えるようになります。

## 注意事項

- このアプリケーションを実行した際に発生する全てに関しては自己責任でお願いします。特にキーイベントに関しては非常に危険を伴うので注意してください。
- Windows専用です（ctypesによるキー入力のため）。
- 仮想キー割り当ては `main.py` の `slider_keymap` で定義されています。
- エアーの自動処理はUMIGURIがアクティブな時以外にも稀に実行されます
- iPhoneやiPadなどではジェスチャー機能によって複数本指以上の動作が不正確になる場合があります。ある程度対策はしましたが、設定からオフにすることでより確実に対策することができます。

## 今後の予定

- 有線接続でのシステムの達成
- スマートフォンアプリケーション化
- エアーをカメラを用いて判定
- GUIの実装
- キー割り当ての自動読み込み機能、手動変更機能

